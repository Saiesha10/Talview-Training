meta {
  name: Inavlid Mutation Test
  type: graphql
  seq: 1
}

post {
  url: {{BASE_URL}}
  body: graphql
  auth: inherit
}

headers {
  x-hasura-admin-secret: oPZqagM8O7pfE4H7ZvsgiWo7HGcnru36vnYTCAsmYfi9KMMvKbk3Q83hEh11VaF0
  Content-Type: application/json
}

body:graphql {
  mutation InvalidMutation {
    insert_users(objects: { nam: "ErrorTest" }) {
      returning { id }
    }
  }
  
}

tests {
  expect(bru.response.status).to.equal(400);
  expect(bru.response.body.errors[0].message).to.include('field "nam" not found');
  
}

settings {
  encodeUrl: true
  timeout: 0
}
